<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>NTOUCSE POKEMON</title>
    <link rel="stylesheet" type="text/css" media="screen" href="Untitled-1.css" />

    <style>
      
        .zh{
            position: absolute;
            width:20%;
            height:45%;
            z-index: 2;
            left:5%;
            top:10%;
        }
        #bkg{
            width:70%;
            height:70%;
        }
        button{
            position: absolute;
            height:7%;
            width:20%;
            z-index: 4;
            right:40%;
            font-size: 125%;
            background-color: rgba(0, 0, 0, 0.507);
            color: white;
            font-weight: bolder;
        }
        button:hover{
            border: 3px white;
        }
        #hanashi{
            top:60%; 
            width:18%; 
            height:10%; 
            left: 5%; 
            border:3px white solid; 
            position: absolute; 
            color: rgb(255, 255, 255); 
            z-index: 4; 
            background-color: rgba(255, 255, 255, 0.349);
            font-size: 20px;
        }
        #status{
            top:75%; 
            height:20%;
            width: 55%;
            border:3px white solid; 
            background-color: rgba(255, 255, 255, 0.349);
            z-index: 4; 
            position: absolute; 
            color: white;
            left: 5%; 
            font-size: 28px;  
        }
        #po{
            z-index: 6;
            height: 70%;
            width: 10%;
            position: absolute;
            right:10%;
            bottom:13%;
        }
        #po:hover{
            border: 2px solid black;
        }
        

    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        //获取浏览器页面可见高度和宽度
        var _PageHeight = document.documentElement.clientHeight,
        _PageWidth = document.documentElement.clientWidth;
        //计算loading框距离顶部和左部的距离（loading框的宽度为215px，高度为250px）
        var _LoadingTop = _PageHeight > 250 ? (_PageHeight - 250) / 2 : 0,
        _LoadingLeft = _PageWidth > 200 ? (_PageWidth - 200) / 2 : 0;
        //在页面未加载完毕之前显示的loading Html自定义内容
        //var _LoadingHtml = '<div id="loadingDiv" style="position:absolute;left:0;width:100%;height:' + _PageHeight + 'px;top:0;background:#f3f8ff;opacity:1;filter:alpha(opacity=80);z-index:10000;"><div style="position: absolute; cursor1: wait; left: ' + _LoadingLeft + 'px; top:' + _LoadingTop + 'px; width: auto; height: 57px; line-height: 57px; padding-left: 50px; padding-right: 5px; background: #fff url(/Content/Images/loading.gif) no-repeat scroll 5px 10px; border: 2px solid #95B8E7; color: #696969;">页面加载中，请等待...</div></div>';
        var _LoadingHtml = '<div id="loadingDiv" style="position:absolute;left:0;width:100%;height:' + _PageHeight + 'px;top:0;background:white;z-index:10000;"><div style="position: absolute; cursor1: wait; left: ' + _LoadingLeft + 'px; top:' + _LoadingTop + 'px; width: 128px; height: 128px; line-height: 128px;  padding-right: 5px; background:white url(zhou.gif) no-repeat scroll -64px -64px;"></div></div>';

        //呈现loading效果
        document.write(_LoadingHtml);

        //监听加载状态改变
        document.onreadystatechange = completeLoading;

        //加载状态为complete时移除loading效果
        function completeLoading() {
            if (document.readyState == "complete") {
                var loadingMask = document.getElementById('loadingDiv');
                loadingMask.parentNode.removeChild(loadingMask);
            }
        }
        var n="喝藥水可以增加最大HP。,我要成為頂大生!,我海大薛之謙啦。,幫我買晚餐，我要讀書。,我愛丁老師！,晚餐來訂外送啊！,吃啥？,好噁==,該讀哪科呢...,我英文猛的。,我要成為微積分之神!,NTOUCS is ____.";
        var h=12;
        var s=n.split(",");

        var cal;
        var eng;
        var com;
        var ehp;
        var dmgesk;
        var pot;
        var hp;
        var maxhp;
        var dmgsk1;
        var dmgsk2;
        var dmgsk3;
        var level;
        var calbook;
        var toeic;
        var comm;
        var hpid;
        var ha;
        var potionid;
        
        function start(){
            loading();
        }
       
        function loading(){
            console.log(ha);
            console.log(hp);
            console.log(potionid);

            var wh=localStorage.getItem("where");
            console.log(wh);
            
            if(localStorage.getItem('cheat')==='1'){
                localStorage.setItem("cal","2");
                localStorage.setItem("eng","1");
                localStorage.setItem("com","2");
                localStorage.setItem("ehp",20);
                localStorage.setItem("maxehp",'20');
                localStorage.setItem("dmgesk","5");

                localStorage.setItem("hp",80);
                localStorage.setItem("maxhp",80);
                
                localStorage.setItem("dmgsk1",15);
                localStorage.setItem("dmgsk2",15);
                localStorage.setItem("dmgsk3",15);
                localStorage.setItem("level",0);
                localStorage.setItem("calbook",'0');
                localStorage.setItem("toeic",'0');
                localStorage.setItem("commaster",'0');
                
                wh='s1';
                localStorage.setItem('where','s1');
                localStorage.setItem('cheat','0');
            }
            else if(localStorage.getItem('cheat')=='0'){
                if(wh==='s0'){
                localStorage.setItem("cal","0");
                localStorage.setItem("eng","0");
                localStorage.setItem("com","0");
                localStorage.setItem("ehp",40);
                localStorage.setItem("maxehp",'40');
                localStorage.setItem("dmgesk","5");
                localStorage.setItem("potion",3);
                localStorage.setItem("hp",50);
                localStorage.setItem("maxhp",50);
               
                localStorage.setItem("dmgsk1",5);
                localStorage.setItem("dmgsk2",5);
                localStorage.setItem("dmgsk3",3);
                localStorage.setItem("level",0);
                localStorage.setItem("calbook",'0');
                localStorage.setItem("toeic",'0');
                localStorage.setItem("commaster",'0');
                
                wh='s1';
                localStorage.setItem('where','s1');
                }
            }
            
            if(wh==='s1'){
                cal=parseInt(localStorage.getItem("cal"));
                eng=parseInt(localStorage.getItem("eng")) ;
                com=parseInt(localStorage.getItem("com")) ;
                ehp=parseInt(localStorage.getItem("ehp"));
                mgesk=parseInt(localStorage.getItem("dmgesk"));
                pot=parseInt(localStorage.getItem("potion"));
                hp=parseInt(localStorage.getItem("hp"));
                maxhp=parseInt(localStorage.getItem("maxhp"));
                dmgsk1=parseInt(localStorage.getItem("dmgsk1"));
                dmgsk2=parseInt(localStorage.getItem('dmgsk2'));
                dmgsk3=parseInt(localStorage.getItem("dmgsk3"));
                level=parseInt(localStorage.getItem("level"));
                calbook=localStorage.getItem('calbook');
                toeic=localStorage.getItem('toeic');
                comm=localStorage.getItem("commaster");
                console.log(localStorage.getItem("maxehp"));
            }
            
            console.log(hp);
            sethp();
            if(cal===2 && calbook==0){
                localStorage.setItem("calbook",'1');
                setTimeout('window.alert("你獲得了微積分學習要訣!")',1000);
            }
            if(eng===1 && toeic==0){
                localStorage.setItem("toeic",'1');
                setTimeout('window.alert("你拿到了多益金色證書!")',1000);
            }
            if(com===2 && comm==0){
                localStorage.setItem("commaster",'1');
                setTimeout('window.alert("你得到了計概大師的稱號!")',1000);
            }
            calbook=localStorage.getItem('calbook');
            toeic=localStorage.getItem('toeic');
            comm=localStorage.getItem("commaster");
            if(calbook==1 && toeic==1 && comm==1 ){
                setTimeout('window.alert("關卡已解鎖!")',1000);
                $("#b4").show();
                localStorage.setItem('calbook','2');
            }
        }
        function sethp(){
            hpid=document.getElementById('hp');
            hpid.innerHTML='HP:'+hp+'/'+maxhp;
            potionid=document.getElementById("po");
            potionid.title="剩餘"+pot+"瓶藥水";
        }
        function wow(){
            var a=Math.floor((Math.random() * 12));
            console.log(a);
            ha=document.getElementById("hanashi");
            ha.innerHTML=s[a];
        }
        function recover(){
            ha=document.getElementById("hanashi");
            potionid=document.getElementById("po");
            hpid=document.getElementById('hp');
            if(pot!=0){
                    pot--;
                    localStorage.setItem('potion',pot);
                    maxhp+=10;
                    localStorage.setItem('hp',maxhp);
                    localStorage.setItem('maxhp',maxhp);
                    localStorage.setItem("dmgsk1",dmgsk1+1);
                    localStorage.setItem("dmgsk2",dmgsk2+1);
                    localStorage.setItem("dmgsk3",dmgsk3+1);
                    

                    hpid.innerHTML='HP:'+maxhp+'/'+maxhp;

                    
                    potionid.title="剩餘"+pot+"瓶藥水"
                    ha.innerHTML="HP增加了10點!";
                }
            else
                ha.innerHTML="沒藥水囉==";
            console.log(pot);
        }
        window.addEventListener("load",start,false);
    </script>
</head>
<body>
    <audio id="sound" preload="auto"><source src="音效/按鈕6.mp3" type="audio/mpeg">button</audio>
    <div style="position:relative;left:15%;">
        <img id="bkg" src="3.jpg">
        <img src="1.png" class="zh" onclick="wow()"> 
        
        <div id="hanashi" >我要成為頂大生!</div>
        <button id="b1" style="top:10%" onclick="window.open('battle.html','_self')" onmouseover="sound.play()">微積分</button>
        <button id="b2" style="top:25%" onclick="window.open('battle1.html','_self')" onmouseover="sound.play()">英文</button>
        <button id="b3" style="top:40%" onclick="window.open('battle2.html','_self')" onmouseover="sound.play()">計算機概論</button>
        <button id="b4" style="top:55% ; display: none;" onclick="window.open('finalbattle.html','_self')" onmouseover="sound.play()">轉學考</button>
        <div id="status">
            <p id="hp" style="padding-left:10px ; "></p>
            <img id="po" src="potion.png" title="" onclick="recover()" onmouseover="sound.play()">
        </div>
    </div>
    <embed src="音效/等待2.mp3" autostart=true hidden=true loop=true>
</body>
</html>
